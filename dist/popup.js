!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var s={};function d(){}function f(){}function p(){}var h={};h[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==e&&n.call(y,o)&&(h=y);var m=p.prototype=d.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(d).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,s;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=m.constructor=p,p.constructor=f,f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(w.prototype),w.prototype[i]=function(){return this},t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),m[o]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";function r(t,e){try{return JSON.parse(t)}catch(t){return e}}function o(t){return("00"+t).slice(-2)}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var r=e.saveAs=window.saveAs||function(t){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),a=t.webkitRequestFileSystem,c=t.requestFileSystem||a||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},l=0,s=function(t){setTimeout((function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},d=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var o=t["on"+e[r]];if("function"==typeof o)try{o.call(t,n||t)}catch(t){u(t)}}},f=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},p=function e(u,p,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h||(u=f(u));var v,y,m,g=this,w=u.type,b=!1,O=function(){d(g,"writestart progress write writeend".split(" "))},x=function(){if(y&&i&&"undefined"!=typeof FileReader){var e=new FileReader;return e.onloadend=function(){var t=e.result;y.location.href="data:attachment/file"+t.slice(t.search(/[,;]/)),g.readyState=g.DONE,O()},e.readAsDataURL(u),void(g.readyState=g.INIT)}(!b&&v||(v=n().createObjectURL(u)),y)?y.location.href=v:void 0===t.open(v,"_blank")&&i&&(t.location.href=v);g.readyState=g.DONE,O(),s(v)},E=function(t){return function(){if(g.readyState!==g.DONE)return t.apply(this,arguments)}},S={create:!0,exclusive:!1};if(g.readyState=g.INIT,p||(p="download"),o)return v=n().createObjectURL(u),void setTimeout((function(){var t,e;r.href=v,r.download=p,t=r,e=new MouseEvent("click"),t.dispatchEvent(e),O(),s(v),g.readyState=g.DONE}));t.chrome&&w&&"application/octet-stream"!==w&&(m=u.slice||u.webkitSlice,u=m.call(u,0,u.size,"application/octet-stream"),b=!0),a&&"download"!==p&&(p+=".download"),("application/octet-stream"===w||a)&&(y=t),c?(l+=u.size,c(t.TEMPORARY,l,E((function(t){t.root.getDirectory("saved",S,E((function(t){var e=function(){t.getFile(p,S,E((function(t){t.createWriter(E((function(e){e.onwriteend=function(e){y.location.href=t.toURL(),g.readyState=g.DONE,d(g,"writeend",e),s(t)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach((function(t){e["on"+t]=g["on"+t]})),e.write(u),g.abort=function(){e.abort(),g.readyState=g.DONE},g.readyState=g.WRITING})),x)})),x)};t.getFile(p,{create:!1},E((function(t){t.remove(),e()})),E((function(t){t.code===t.NOT_FOUND_ERR?e():x()})))})),x)})),x)):x()},h=p.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return n||(t=f(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(h.abort=function(){this.readyState=this.DONE,d(this,"abort")},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e,n){return new p(t,e,n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);e.default=r},function(t,e,n){"use strict";n.d(e,"f",(function(){return y})),n.d(e,"g",(function(){return g})),n.d(e,"b",(function(){return w})),n.d(e,"d",(function(){return O})),n.d(e,"e",(function(){return E})),n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return T}));var r=n(1);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,c,"next",t)}function c(t){l(i,r,o,a,c,"throw",t)}a(void 0)}))}}var d=((t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*r*e/t.length);return()=>{let i="";for(;;){let a=n(o),c=o;for(;c--;)if(i+=t[a[c]&r]||"",i.length===e)return i}}})("ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",10,t=>crypto.getRandomValues(new Uint8Array(t))),f="sync",p="local";function h(t,e){return new Promise((function(n){return chrome.storage[t].get(e,n)}))}function v(t,e){return new Promise((function(n){return chrome.storage[t].set(e,n)}))}function y(){return m.apply(this,arguments)}function m(){return(m=s(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(f,{sources:'["sources-1"]'});case 2:return e=t.sent,t.abrupt("return",Object(r.b)(e,["sources-1"]).reduce((function(t,e){return Promise.all([t,h(f,u({},e,"[]"))]).then((function(t){var n=o(t,2),i=n[0],a=n[1];return i.concat(Object(r.b)(a[e],[]))}))}),Promise.resolve([])));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){for(var e=[],n={},r=1;r<=Math.max(1,Math.ceil(t.length/20));r++){var o="sources-".concat(r);e.push(o),n[o]=JSON.stringify(t.slice(20*(r-1),20*r))}return n.registry=JSON.stringify(e),v(f,n)}function w(t){return b.apply(this,arguments)}function b(){return(b=s(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:return(n=t.sent).push(c(c({},e),{},{id:d()})),t.next=6,g(n);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return x.apply(this,arguments)}function x(){return(x=s(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:return n=t.sent,r=n.filter((function(t){return(null==t?void 0:t.id)!==e})),t.next=6,g(r);case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=s(regeneratorRuntime.mark((function t(){var e,n,i,a,c,u,l,s,d,v,y,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(f,{hiddenChapters:"{}",hide:Date.now()});case 2:return e=t.sent,n=e.hiddenChapters,i=e.hide,t.next=7,h(p,{urls:"[]"});case 7:return a=t.sent,c=a.urls,u=Object(r.b)(n,{}),l=Object(r.b)(c,[]),s=function(t){return!!(i&&t.created<i||u[t.id])},d=Object.values(l).sort((function(t,e){var n=e.created-t.created;return Math.abs(n)<500?String(t).localeCompare(e):n})).reduce((function(t,e){var n=o(t,2),r=n[0],i=n[1];return s(e)?r.push(e):i.push(e),[r,i]}),[[],[]]),v=o(d,2),y=v[0],m=v[1],t.abrupt("return",{oldUrls:y,newUrls:m});case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return k.apply(this,arguments)}function k(){return(k=s(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r.b,t.next=3,h(f,{hiddenChapters:"{}"});case 3:return t.t1=t.sent,t.t2={},(n=(0,t.t0)(t.t1,t.t2))[e]=!0,t.abrupt("return",v(f,{hiddenChapters:JSON.stringify(n)}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I,L,T=(L=[],function(t){I||(I=setTimeout(s(regeneratorRuntime.mark((function t(){var e,n,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=L,L=[],I=void 0,t.next=5,h(p,{urls:"{}"});case 5:n=t.sent,o=n.urls,i=Object(r.b)(o,{}),a=c({},i),e.forEach((function(t){a[t.url]=c(c({},t),{},{id:d()})})),Object.keys(a)>Object.keys(i)&&v(p,{urls:JSON.stringify(a)});case 11:case"end":return t.stop()}}),t)}))),100)),L.push(t)})},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(1),a=n(3);function c(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var u=null,l=document.getElementById("bookmark"),s=document.getElementById("bookmark-track"),d=document.getElementById("bookmark-hide"),f=document.getElementById("bookmark-title"),p=document.getElementById("title"),h=document.getElementById("url"),v=document.getElementById("mangaId");function y(){var t,e,n,r,o,i,a,c,u,l,s,d,f,p,h,v,y,m,g,w,b;var O=[null===(t=window)||void 0===t||null===(e=t.manga)||void 0===e?void 0:e.manga_id,null===(n=document.querySelector(".rating-post-id"))||void 0===n?void 0:n.value,null===(r=document.querySelector(".wp-manga-action-button"))||void 0===r||null===(o=r.dataset)||void 0===o?void 0:o.post,null===(i=document.querySelector(".chapter-selection"))||void 0===i||null===(a=i.dataset)||void 0===a?void 0:a.manga,null===(c=document.getElementById("manga-chapters-holder"))||void 0===c||null===(u=c.dataset)||void 0===u?void 0:u.id,null===(l=document.getElementById("manga-reading-nav-head"))||void 0===l||null===(s=l.dataset)||void 0===s?void 0:s.id,null===(d=document.getElementById("manga-reading-nav-foot"))||void 0===d||null===(f=d.dataset)||void 0===f?void 0:f.id,null===(p=document.querySelector("link[rel=shortlink]"))||void 0===p||null===(h=p.href)||void 0===h?void 0:h.split("?p=")[1]].filter((function(t){return t})).reduce((function(t,e){return t[e]="number"==typeof t[e]?t[e]+1:1,t}),{}),x=Object.keys(O).sort((function(t,e){return O[t]-O[e]}))[0],E=[Array.from(document.querySelectorAll('script[type="application/ld+json"]')).map((function(t){var e;return null===(e=function(t,e){try{return JSON.parse(t)}catch(t){return e}}(t.innerText))||void 0===e?void 0:e.headline})).find((function(t){return t})),null===(v=document.getElementById("chapter-heading"))||void 0===v||null===(y=v.innerText)||void 0===y?void 0:y.split(" - ")[0],null===(m=document.querySelector(".post-title h1"))||void 0===m?void 0:m.innerText,null===(g=document.querySelector(".rate-title"))||void 0===g?void 0:g.title].filter((function(t){return t})).reduce((function(t,e){return t[e]="number"==typeof t[e]?t[e]+1:1,t}),{}),S=Object.keys(E).sort((function(t,e){return E[t]-E[e]}))[0];chrome.runtime.sendMessage({id:x,title:S,url:null!==(w=document)&&void 0!==w&&null!==(b=w.location)&&void 0!==b&&b.origin?"".concat(document.location.origin,"/wp-admin/admin-ajax.php"):null})}d.addEventListener("click",(function(){l.style.display="none",f.innerText="",u=null})),s.addEventListener("click",(function(){l.style.display="none",f.innerText="",Object(a.b)(u),u=null})),chrome.runtime.onMessage.addListener(function(){var t,e=(t=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.id&&e.title&&e.url)){t.next=12;break}return t.next=3,Object(a.f)();case 3:if(t.sent.some((function(t){return t.url===e.url&&String(t.mangaId)===String(e.id)}))){t.next=12;break}return l.style.display="flex",f.innerText='Do you want to start tracking "'.concat(e.title,'"?'),u={mangaId:e.id,title:e.title,url:e.url},p.value=u.title,h.value=u.url,v.value=u.mangaId,t.abrupt("return");case 12:p.value="",h.value="",v.value="",l.style.display="none",f.innerText="",u=null;case 18:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){c(i,r,o,a,u,"next",t)}function u(t){c(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}());var m=n(2),g=n.n(m),w=document.getElementById("import"),b=document.getElementById("export");function O(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){O(i,r,o,a,c,"next",t)}function c(t){O(i,r,o,a,c,"throw",t)}a(void 0)}))}}w.addEventListener("change",(function(t){var e=t.target.files[0],n=new FileReader;n.addEventListener("load",(function(){var t=Object(i.b)(n.result,[]).filter((function(t){return(null==t?void 0:t.title)&&t.url&&t.mangaId}));t.length&&Object(a.g)(t),w.files=null})),n.readAsText(e)})),b.addEventListener("click",(function(){Object(a.f)().then((function(t){var e=new Blob([JSON.stringify(t)],{type:"application/json"});g()(e,"mangapoll.json")}))}));var E=document.getElementById("hide"),S=document.getElementById("popupTitle"),j=document.getElementById("add"),k=document.getElementById("addSection"),I=document.getElementById("urls"),L=document.getElementById("title"),T=document.getElementById("url"),R=document.getElementById("mangaId"),P=document.getElementById("submitSource"),N=document.getElementById("sources"),_=25;function M(){return B.apply(this,arguments)}function B(){return(B=x(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.f();case 2:e=t.sent,N.innerHTML=e.sort((function(t,e){return String(t.title).localeCompare(null==e?void 0:e.title)})).map((function(t){return'<li class="row source">\n                <div class="data">\n                    <span class="title">'.concat(t.title,'</span>\n                    <span class="manga-id">(<b>Manga-Id</b>: ').concat(t.mangaId,')</span>\n                    <span class="url" title="').concat(t.url,'"><b>Url</b>: ').concat(t.url,'</span>\n                </div>\n                <span class="delete action" data-id="').concat(t.id,'">Delete</span>\n            </li>')})).join("\n");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return function(e){var n=new Date(e.created),r=String(e.url).match(/\/[^\/]*hapter[^\/\d]*(\d*)[^\d\/]*[^\/]*\//)||[],o="".concat(Object(i.a)(n.getHours()),":").concat(Object(i.a)(n.getMinutes())),a="".concat(Object(i.a)(n.getDate()),".").concat(Object(i.a)(n.getMonth()+1),".").concat(String(n.getFullYear()).slice(-2)),c=n.toISOString().split("T")[0]===(new Date).toISOString().split("T")[0]?o:a;return'\n            <li class="row'.concat(t?" old":" new",'">\n                <a class="link" href="').concat(e.url,'" target="_blank" rel="noopener" data-id="').concat(e.id,'">\n                    ').concat(e.title," - Chapter ").concat(r[1],'\n                </a>\n                <span class="date-wrapper">\n                <span class="date">').concat(c,'</span>\n                <span class="hide" data-id="').concat(e.id,'">Hide</span>\n                </span>\n            </li>')}}function A(){return C.apply(this,arguments)}function C(){return(C=x(o.a.mark((function t(){var e,n,r,i,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e();case 2:e=t.sent,n=e.newUrls,r=e.oldUrls,i=n.map(D(!1)),c=r.map(D(!0)),i.length||c.length?(I.innerHTML=i.concat('<li class="old-chapters">Old Chapters</li>').concat(c.slice(0,_)).concat(c.length>_?['<li class="action load-more">Load '.concat(Math.min(_,c.length-_)," more old chapters...</li>")]:[]).join("\n"),document.title=i.length?"(".concat(i.length,") Manga Poll"):"Manga Poll"):(I.innerHTML='<li class="row">No Chapters available.</li>',document.title="Manga Poll");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}E.addEventListener("click",(function(){chrome.storage.sync.set({hide:Date.now(),hiddenChapters:"{}"})})),I.addEventListener("click",function(){var t=x(o.a.mark((function t(e){var n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.target.closest(".row .hide"))&&n.dataset.id&&I.contains(n)&&a.a(n.dataset.id),!((r=e.target.closest(".row.new .link"))&&r.dataset.id&&I.contains(r))){t.next=8;break}return e.preventDefault(),t.next=7,a.a(r.dataset.id);case 7:window.open(r.href,"_blank");case 8:(i=e.target.closest(".action.load-more"))&&I.contains(i)&&(_+=_,A());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),N.addEventListener("click",(function(t){var e=t.target.closest(".row .action.delete");e&&e.dataset.id&&N.contains(e)&&(a.d(e.dataset.id),e.classList.remove("action"))})),j.addEventListener("click",(function(){"flex"!==k.style.display?(k.style.display="flex",N.style.display="block",I.style.display="none",E.style.display="none",S.innerText="Manga Settings",j.innerText="Chapters",N.innerHTML='<li class="row" style="text-align: center;">...loading</li>',M()):(k.style.display="none",N.style.display="none",I.style.display="",j.innerText="Manga Settings",E.style.display="",S.innerText="Chapters")})),P.addEventListener("click",(function(){L.value&&T.value&&R.value&&(P.disabled=!0,a.b({title:L.value,url:T.value,mangaId:R.value}).then((function(){L.value="",T.value="",R.value="",P.disabled=!1})))})),chrome.storage.onChanged.addListener((function(t){["hide","hiddenChapters","urls"].some(t.hasOwnProperty.bind(t))&&A(),Object.keys(t).some((function(t){return t.includes("sources")}))&&M()})),A(),M().then((function(){chrome.tabs.query({active:!0,windowId:chrome.windows.WINDOW_ID_CURRENT},(function(t){t[0].url.includes("chrome://")||chrome.scripting.executeScript({target:{tabId:t[0].id},function:y})}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NhdmUtYXMvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9kYi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL25hbm9pZC91cmwtYWxwaGFiZXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jvb2ttYXJrLmpzIiwid2VicGFjazovLy8uL3NyYy9pbXBvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvcHVwLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicnVudGltZSIsIk9wIiwiaGFzT3duIiwiJFN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiaXRlcmF0b3IiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwiZGVmaW5lIiwib2JqIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJlcnIiLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJzZWxmIiwidHJ5TG9jc0xpc3QiLCJwcm90b0dlbmVyYXRvciIsIkdlbmVyYXRvciIsImdlbmVyYXRvciIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsInN0YXRlIiwibWV0aG9kIiwiYXJnIiwiRXJyb3IiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsInR5cGUiLCJkb25lIiwibWFrZUludm9rZU1ldGhvZCIsImZuIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsIkl0ZXJhdG9yUHJvdG90eXBlIiwidGhpcyIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsInZhbHVlcyIsIkdwIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiZm9yRWFjaCIsIkFzeW5jSXRlcmF0b3IiLCJQcm9taXNlSW1wbCIsInByZXZpb3VzUHJvbWlzZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwicmVzb2x2ZSIsInJlamVjdCIsImludm9rZSIsInJlc3VsdCIsIl9fYXdhaXQiLCJ0aGVuIiwidW53cmFwcGVkIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJUeXBlRXJyb3IiLCJpbmZvIiwicmVzdWx0TmFtZSIsIm5leHQiLCJuZXh0TG9jIiwicHVzaFRyeUVudHJ5IiwibG9jcyIsImVudHJ5IiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicHVzaCIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJpdGVyYWJsZSIsIml0ZXJhdG9yTWV0aG9kIiwiaXNOYU4iLCJsZW5ndGgiLCJjb25zdHJ1Y3RvciIsImRpc3BsYXlOYW1lIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJtYXJrIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJhd3JhcCIsImFzeW5jIiwiUHJvbWlzZSIsIml0ZXIiLCJ0b1N0cmluZyIsImtleXMiLCJyZXZlcnNlIiwicG9wIiwic2tpcFRlbXBSZXNldCIsInByZXYiLCJjaGFyQXQiLCJzbGljZSIsInN0b3AiLCJyb290UmVjb3JkIiwicnZhbCIsImV4Y2VwdGlvbiIsImhhbmRsZSIsImxvYyIsImNhdWdodCIsImhhc0NhdGNoIiwiaGFzRmluYWxseSIsImZpbmFsbHlFbnRyeSIsImNvbXBsZXRlIiwiZmluaXNoIiwidGhyb3duIiwiZGVsZWdhdGVZaWVsZCIsInJlZ2VuZXJhdG9yUnVudGltZSIsImFjY2lkZW50YWxTdHJpY3RNb2RlIiwiRnVuY3Rpb24iLCJwYXJzZSIsInN0cmluZyIsImZhbGxiYWNrIiwiSlNPTiIsImUiLCJwYWQiLCJubyIsInNhdmVBcyIsIndpbmRvdyIsInZpZXciLCJuYXZpZ2F0b3IiLCJ0ZXN0IiwidXNlckFnZW50IiwiZG9jIiwiZG9jdW1lbnQiLCJnZXRfVVJMIiwiVVJMIiwid2Via2l0VVJMIiwic2F2ZV9saW5rIiwiY3JlYXRlRWxlbWVudE5TIiwiY2FuX3VzZV9zYXZlX2xpbmsiLCJpc19zYWZhcmkiLCJ3ZWJraXRfcmVxX2ZzIiwid2Via2l0UmVxdWVzdEZpbGVTeXN0ZW0iLCJyZXFfZnMiLCJyZXF1ZXN0RmlsZVN5c3RlbSIsIm1velJlcXVlc3RGaWxlU3lzdGVtIiwidGhyb3dfb3V0c2lkZSIsImV4Iiwic2V0SW1tZWRpYXRlIiwic2V0VGltZW91dCIsImZzX21pbl9zaXplIiwicmV2b2tlIiwiZmlsZSIsInJldm9rZU9iamVjdFVSTCIsInJlbW92ZSIsImRpc3BhdGNoIiwiZmlsZXNhdmVyIiwiZXZlbnRfdHlwZXMiLCJldmVudCIsImNvbmNhdCIsImxpc3RlbmVyIiwiYXV0b19ib20iLCJibG9iIiwiQmxvYiIsIkZpbGVTYXZlciIsIm5vX2F1dG9fYm9tIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9jbGFzc0NhbGxDaGVjayIsIm9iamVjdF91cmwiLCJ0YXJnZXRfdmlldyIsImJsb2JfY2hhbmdlZCIsImRpc3BhdGNoX2FsbCIsInNwbGl0IiwiZnNfZXJyb3IiLCJGaWxlUmVhZGVyIiwicmVhZGVyIiwib25sb2FkZW5kIiwiYmFzZTY0RGF0YSIsImxvY2F0aW9uIiwiaHJlZiIsInNlYXJjaCIsInJlYWR5U3RhdGUiLCJET05FIiwicmVhZEFzRGF0YVVSTCIsIklOSVQiLCJjcmVhdGVPYmplY3RVUkwiLCJvcGVuIiwiYWJvcnRhYmxlIiwiZnVuYyIsImFwcGx5IiwiYXJndW1lbnRzIiwiY3JlYXRlX2lmX25vdF9mb3VuZCIsImV4Y2x1c2l2ZSIsIm5vZGUiLCJkb3dubG9hZCIsIk1vdXNlRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiY2hyb21lIiwid2Via2l0U2xpY2UiLCJzaXplIiwiVEVNUE9SQVJZIiwiZnMiLCJyb290IiwiZ2V0RGlyZWN0b3J5IiwiZGlyIiwic2F2ZSIsImdldEZpbGUiLCJjcmVhdGVXcml0ZXIiLCJ3cml0ZXIiLCJvbndyaXRlZW5kIiwidG9VUkwiLCJvbmVycm9yIiwiY29kZSIsIkFCT1JUX0VSUiIsIndyaXRlIiwiYWJvcnQiLCJXUklUSU5HIiwiTk9UX0ZPVU5EX0VSUiIsIkZTX3Byb3RvIiwibXNTYXZlT3JPcGVuQmxvYiIsIm9ud3JpdGVzdGFydCIsIm9ucHJvZ3Jlc3MiLCJvbndyaXRlIiwib25hYm9ydCIsImNvbnRlbnQiLCJkZWZhdWx0IiwibmFub2lkIiwiYWxwaGFiZXQiLCJnZXRSYW5kb20iLCJtYXNrIiwiTWF0aCIsImxvZyIsIkxOMiIsInN0ZXAiLCJpZCIsImJ5dGVzIiwiaiIsImN1c3RvbVJhbmRvbSIsImNyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIlVpbnQ4QXJyYXkiLCJOQU1FU1BBQ0VTIiwicmVhZCIsIm5hbWVzcGFjZSIsInN0b3JhZ2UiLCJrZXlQYWlycyIsInNldCIsInJlYWRTb3VyY2VzIiwicmVnaXN0cnkiLCJyZWR1Y2UiLCJzb3VyY2VzIiwiYWxsIiwic291cmNlIiwid3JpdGVTb3VyY2VzIiwidXBkYXRlcyIsIngiLCJtYXgiLCJjZWlsIiwic3RyaW5naWZ5IiwiYWRkU291cmNlIiwiZGVsZXRlU291cmNlIiwic291cmNlSWQiLCJuZXdTb3VyY2VzIiwiZmlsdGVyIiwiZ2V0RmlsdGVyZWRTb3J0ZWRVcmxzIiwiaGlkZGVuQ2hhcHRlcnMiLCJoaWRlIiwiRGF0ZSIsIm5vdyIsImhpZGRlbkNoYXB0ZXJzU3RyaW5nIiwidXJscyIsInVybExpc3QiLCJjaGVja09sZCIsImNoYXB0ZXIiLCJjcmVhdGVkIiwic29ydCIsInVybDEiLCJ1cmwyIiwiZGlmZiIsImFicyIsIlN0cmluZyIsImxvY2FsZUNvbXBhcmUiLCJ1cmwiLCJvbGRVcmxzIiwibmV3VXJscyIsImFkZEhpZGRlbkNoYXB0ZXIiLCJ3cml0ZVRpbWVvdXQiLCJ1cmxVcGRhdGUiLCJhZGRVcmwiLCJyYXdVcmxzIiwidXBkYXRlIiwiY3VycmVudFNvdXJjZSIsImJvb2ttYXJrIiwiZ2V0RWxlbWVudEJ5SWQiLCJib29rbWFya1RyYWNrIiwiYm9va21hcmtIaWRlIiwiYm9va21hcmtUaXRsZSIsInRpdGxlIiwibWFuZ2FJZCIsImlkcyIsIm1hbmdhIiwibWFuZ2FfaWQiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YXNldCIsIm1hcCIsImlkMSIsImlkMiIsInRpdGxlcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY3JpcHQiLCJpbm5lclRleHQiLCJoZWFkbGluZSIsImZpbmQiLCJoIiwidGl0bGUxIiwidGl0bGUyIiwic2VuZE1lc3NhZ2UiLCJvcmlnaW4iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5Iiwib25NZXNzYWdlIiwiYWRkTGlzdGVuZXIiLCJyZXF1ZXN0Iiwic29tZSIsImltcG9ydEVsZW0iLCJleHBvcnRFbGVtIiwidGFyZ2V0IiwiZmlsZXMiLCJmciIsImNsZWFuIiwicmVhZEFzVGV4dCIsImhpZGVBbGwiLCJwb3B1cFRpdGxlIiwiYWRkIiwiYWRkU2VjdGlvbiIsInN1Ym1pdFNvdXJjZSIsIm1heE9sZCIsImEiLCJkYiIsImRhdGEiLCJpbm5lckhUTUwiLCJzb3VyY2UxIiwic291cmNlMiIsImpvaW4iLCJjcmVhdGVVcmxSZW5kZXJlciIsImlzT2xkIiwiZGF0ZSIsIm1hdGNoIiwidGltZVN0cmluZyIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImRhdGVTdHJpbmciLCJnZXREYXRlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImZ1bGxEYXRlIiwidG9JU09TdHJpbmciLCJ3cml0ZVVybHMiLCJuZXdSb3dzIiwib2xkUm93cyIsIm1pbiIsInN5bmMiLCJjbG9zZXN0SGlkZSIsImNsb3Nlc3QiLCJjb250YWlucyIsImNsb3Nlc3RMaW5rIiwicHJldmVudERlZmF1bHQiLCJjbG9zZXN0TW9yZSIsImNsYXNzTGlzdCIsImRpc2FibGVkIiwib25DaGFuZ2VkIiwiY2hhbmdlcyIsImNoYW5nZSIsImluY2x1ZGVzIiwidGFicyIsInF1ZXJ5IiwiYWN0aXZlIiwid2luZG93SWQiLCJ3aW5kb3dzIiwiV0lORE9XX0lEX0NVUlJFTlQiLCJzY3JpcHRpbmciLCJleGVjdXRlU2NyaXB0IiwidGFiSWQiLCJmdW5jdGlvbiJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4s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LE1BQUssU0FBQWlELEdBQU0sT0FBSUEsRUFBT0MsU0FBUyxlQUNwRDNILE9BSVIyRyxJQUNBM0csSUFDS3JNLE1GdklFLFdBQ0g2SSxPQUFPb0wsS0FBS0MsTUFDUixDQUFFQyxRQUFRLEVBQU1DLFNBQVV2TCxPQUFPd0wsUUFBUUMsb0JBQ3pDLFNBQUNMLEdBQ1FBLEVBQUssR0FBRy9GLElBQUk4RixTQUFTLGNBQ3RCbkwsT0FBTzBMLFVBQVVDLGNBQWMsQ0FBRXZELE9BQVEsQ0FBRXdELE1BQU9SLEVBQUssR0FBRy9JLElBQU13SixTQUFValEiLCJmaWxlIjoicG9wdXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gSUUgOCBoYXMgYSBicm9rZW4gT2JqZWN0LmRlZmluZVByb3BlcnR5IHRoYXQgb25seSB3b3JrcyBvbiBET00gb2JqZWN0cy5cbiAgICBkZWZpbmUoe30sIFwiXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWZpbmUgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShcbiAgICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICB0b1N0cmluZ1RhZ1N5bWJvbCxcbiAgICBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgKTtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvclwiKTtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbn1cbiIsIlxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCBmYWxsYmFjaykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzdHJpbmcpXHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxsYmFja1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhZChubykge1xyXG4gICAgcmV0dXJuICgnMDAnICsgbm8pLnNsaWNlKC0yKVxyXG59XHJcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyogRmlsZVNhdmVyLmpzXHJcbiAqIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXHJcbiAqIEVTNmlmaWVkIGJ5IENvbGUgQ2hhbWJlcmxhaW4sIGh0dHBzOi8vZ2l0aHViLmNvbS9jY2hhbWJlcmxhaW5cclxuICpcclxuICogTGljZW5zZTogTUlUXHJcbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXHJcbiAqL1xuXG4vKmdsb2JhbCBzZWxmICovXG4vKmpzbGludCBiaXR3aXNlOiB0cnVlLCBpbmRlbnQ6IDQsIGxheGJyZWFrOiB0cnVlLCBsYXhjb21tYTogdHJ1ZSwgc21hcnR0YWJzOiB0cnVlLCBwbHVzcGx1czogdHJ1ZSAqL1xuXG4vKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0ZpbGVTYXZlci5qcyAqL1xuXG52YXIgc2F2ZUFzID0gZXhwb3J0cy5zYXZlQXMgPSB3aW5kb3cuc2F2ZUFzIHx8IGZ1bmN0aW9uICh2aWV3KSB7XG4gIC8vIElFIDwxMCBpcyBleHBsaWNpdGx5IHVuc3VwcG9ydGVkXG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvTVNJRSBbMS05XVxcLi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgcmV0dXJuO1xuICB2YXIgZG9jID0gdmlldy5kb2N1bWVudDtcbiAgLy8gb25seSBnZXQgVVJMIHdoZW4gbmVjZXNzYXJ5IGluIGNhc2UgQmxvYi5qcyBoYXNuJ3Qgb3ZlcnJpZGRlbiBpdCB5ZXRcbiAgdmFyIGdldF9VUkwgPSBmdW5jdGlvbiBnZXRfVVJMKCkge1xuICAgIHJldHVybiB2aWV3LlVSTCB8fCB2aWV3LndlYmtpdFVSTCB8fCB2aWV3O1xuICB9O1xuICB2YXIgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsICdhJyk7XG4gIHZhciBjYW5fdXNlX3NhdmVfbGluayA9ICdkb3dubG9hZCcgaW4gc2F2ZV9saW5rO1xuICB2YXIgY2xpY2sgPSBmdW5jdGlvbiBjbGljayhub2RlKSB7XG4gICAgdmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJyk7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfTtcbiAgdmFyIGlzX3NhZmFyaSA9IC9WZXJzaW9uXFwvW1xcZFxcLl0rLipTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIHZhciB3ZWJraXRfcmVxX2ZzID0gdmlldy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbTtcbiAgdmFyIHJlcV9mcyA9IHZpZXcucmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2Via2l0X3JlcV9mcyB8fCB2aWV3Lm1velJlcXVlc3RGaWxlU3lzdGVtO1xuICB2YXIgdGhyb3dfb3V0c2lkZSA9IGZ1bmN0aW9uIHRocm93X291dHNpZGUoZXgpIHtcbiAgICAodmlldy5zZXRJbW1lZGlhdGUgfHwgdmlldy5zZXRUaW1lb3V0KShmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBleDtcbiAgICB9LCAwKTtcbiAgfTtcbiAgdmFyIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgdmFyIGZzX21pbl9zaXplID0gMDtcbiAgLy8gdGhlIEJsb2IgQVBJIGlzIGZ1bmRhbWVudGFsbHkgYnJva2VuIGFzIHRoZXJlIGlzIG5vIFwiZG93bmxvYWRmaW5pc2hlZFwiIGV2ZW50IHRvIHN1YnNjcmliZSB0b1xuICB2YXIgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0ID0gMTAwMCAqIDQwOyAvLyBpbiBtc1xuICB2YXIgcmV2b2tlID0gZnVuY3Rpb24gcmV2b2tlKGZpbGUpIHtcbiAgICB2YXIgcmV2b2tlciA9IGZ1bmN0aW9uIHJldm9rZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGZpbGUgPT09ICdzdHJpbmcnKSAvLyBmaWxlIGlzIGFuIG9iamVjdCBVUkxcbiAgICAgICAgZ2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtlbHNlIC8vIGZpbGUgaXMgYSBGaWxlXG4gICAgICAgIGZpbGUucmVtb3ZlKCk7XG4gICAgfTtcbiAgICAvKiAvLyBUYWtlIG5vdGUgVzNDOlxyXG4gICAgdmFyXHJcbiAgICAgIHVyaSA9IHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiID8gZmlsZSA6IGZpbGUudG9VUkwoKVxyXG4gICAgLCByZXZva2VyID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIC8vIGlkZWFseSBEb3dubG9hZEZpbmlzaGVkRXZlbnQuZGF0YSB3b3VsZCBiZSB0aGUgVVJMIHJlcXVlc3RlZFxyXG4gICAgICBpZiAoZXZ0LmRhdGEgPT09IHVyaSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIikgeyAvLyBmaWxlIGlzIGFuIG9iamVjdCBVUkxcclxuICAgICAgICAgIGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcclxuICAgICAgICAgIGZpbGUucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICB2aWV3LmFkZEV2ZW50TGlzdGVuZXIoXCJkb3dubG9hZGZpbmlzaGVkXCIsIHJldm9rZXIpO1xyXG4gICAgKi9cbiAgICBzZXRUaW1lb3V0KHJldm9rZXIsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCk7XG4gIH07XG4gIHZhciBkaXNwYXRjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoKGZpbGVzYXZlciwgZXZlbnRfdHlwZXMsIGV2ZW50KSB7XG4gICAgZXZlbnRfdHlwZXMgPSBbXS5jb25jYXQoZXZlbnRfdHlwZXMpO1xuICAgIHZhciBpID0gZXZlbnRfdHlwZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBsaXN0ZW5lciA9IGZpbGVzYXZlclsnb24nICsgZXZlbnRfdHlwZXNbaV1dO1xuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxpc3RlbmVyLmNhbGwoZmlsZXNhdmVyLCBldmVudCB8fCBmaWxlc2F2ZXIpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIHRocm93X291dHNpZGUoZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB2YXIgYXV0b19ib20gPSBmdW5jdGlvbiBhdXRvX2JvbShibG9iKSB7XG4gICAgLy8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcbiAgICBpZiAoL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkgcmV0dXJuIG5ldyBCbG9iKFsn77u/JywgYmxvYl0sIHsgdHlwZTogYmxvYi50eXBlIH0pO1xuICAgIHJldHVybiBibG9iO1xuICB9O1xuXG4gIHZhciBGaWxlU2F2ZXIgPSBmdW5jdGlvbiBGaWxlU2F2ZXIoYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZVNhdmVyKTtcblxuICAgIGlmICghbm9fYXV0b19ib20pIGJsb2IgPSBhdXRvX2JvbShibG9iKTtcbiAgICAvLyBGaXJzdCB0cnkgYS5kb3dubG9hZCwgdGhlbiB3ZWIgZmlsZXN5c3RlbSwgdGhlbiBvYmplY3QgVVJMc1xuICAgIHZhciBmaWxlc2F2ZXIgPSB0aGlzLFxuICAgICAgICB0eXBlID0gYmxvYi50eXBlLFxuICAgICAgICBibG9iX2NoYW5nZWQgPSBmYWxzZSxcbiAgICAgICAgb2JqZWN0X3VybCxcbiAgICAgICAgdGFyZ2V0X3ZpZXcsXG4gICAgICAgIGRpc3BhdGNoX2FsbCA9IGZ1bmN0aW9uIGRpc3BhdGNoX2FsbCgpIHtcbiAgICAgIGRpc3BhdGNoKGZpbGVzYXZlciwgJ3dyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmQnLnNwbGl0KCcgJykpO1xuICAgIH1cbiAgICAvLyBvbiBhbnkgZmlsZXN5cyBlcnJvcnMgcmV2ZXJ0IHRvIHNhdmluZyB3aXRoIG9iamVjdCBVUkxzXG4gICAgLFxuICAgICAgICBmc19lcnJvciA9IGZ1bmN0aW9uIGZzX2Vycm9yKCkge1xuICAgICAgaWYgKHRhcmdldF92aWV3ICYmIGlzX3NhZmFyaSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiB1cmxzXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBiYXNlNjREYXRhID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICB0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmID0gJ2RhdGE6YXR0YWNobWVudC9maWxlJyArIGJhc2U2NERhdGEuc2xpY2UoYmFzZTY0RGF0YS5zZWFyY2goL1ssO10vKSk7XG4gICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcbiAgICAgICAgICBkaXNwYXRjaF9hbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG4gICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGRvbid0IGNyZWF0ZSBtb3JlIG9iamVjdCBVUkxzIHRoYW4gbmVlZGVkXG4gICAgICBpZiAoYmxvYl9jaGFuZ2VkIHx8ICFvYmplY3RfdXJsKSB7XG4gICAgICAgIG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgfVxuICAgICAgaWYgKHRhcmdldF92aWV3KSB7XG4gICAgICAgIHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG5ld190YWIgPSB2aWV3Lm9wZW4ob2JqZWN0X3VybCwgJ19ibGFuaycpO1xuICAgICAgICBpZiAobmV3X3RhYiA9PT0gdW5kZWZpbmVkICYmIGlzX3NhZmFyaSkge1xuICAgICAgICAgIC8vQXBwbGUgZG8gbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cDovL2JpdC5seS8xa1pmZlJJXG4gICAgICAgICAgdmlldy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcbiAgICAgIGRpc3BhdGNoX2FsbCgpO1xuICAgICAgcmV2b2tlKG9iamVjdF91cmwpO1xuICAgIH0sXG4gICAgICAgIGFib3J0YWJsZSA9IGZ1bmN0aW9uIGFib3J0YWJsZShmdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZmlsZXNhdmVyLnJlYWR5U3RhdGUgIT09IGZpbGVzYXZlci5ET05FKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgICAgICBjcmVhdGVfaWZfbm90X2ZvdW5kID0geyBjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2UgfSxcbiAgICAgICAgc2xpY2U7XG5cbiAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuICAgIGlmICghbmFtZSkge1xuICAgICAgbmFtZSA9ICdkb3dubG9hZCc7XG4gICAgfVxuICAgIGlmIChjYW5fdXNlX3NhdmVfbGluaykge1xuICAgICAgb2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2F2ZV9saW5rLmhyZWYgPSBvYmplY3RfdXJsO1xuICAgICAgICBzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuICAgICAgICBjbGljayhzYXZlX2xpbmspO1xuICAgICAgICBkaXNwYXRjaF9hbGwoKTtcbiAgICAgICAgcmV2b2tlKG9iamVjdF91cmwpO1xuICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE9iamVjdCBhbmQgd2ViIGZpbGVzeXN0ZW0gVVJMcyBoYXZlIGEgcHJvYmxlbSBzYXZpbmcgaW4gR29vZ2xlIENocm9tZSB3aGVuXG4gICAgLy8gdmlld2VkIGluIGEgdGFiLCBzbyBJIGZvcmNlIHNhdmUgd2l0aCBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cbiAgICAvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05MTE1OFxuICAgIC8vIFVwZGF0ZTogR29vZ2xlIGVycmFudGx5IGNsb3NlZCA5MTE1OCwgSSBzdWJtaXR0ZWQgaXQgYWdhaW46XG4gICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM4OTY0MlxuICAgIGlmICh2aWV3LmNocm9tZSAmJiB0eXBlICYmIHR5cGUgIT09IGZvcmNlX3NhdmVhYmxlX3R5cGUpIHtcbiAgICAgIHNsaWNlID0gYmxvYi5zbGljZSB8fCBibG9iLndlYmtpdFNsaWNlO1xuICAgICAgYmxvYiA9IHNsaWNlLmNhbGwoYmxvYiwgMCwgYmxvYi5zaXplLCBmb3JjZV9zYXZlYWJsZV90eXBlKTtcbiAgICAgIGJsb2JfY2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIC8vIFNpbmNlIEkgY2FuJ3QgYmUgc3VyZSB0aGF0IHRoZSBndWVzc2VkIG1lZGlhIHR5cGUgd2lsbCB0cmlnZ2VyIGEgZG93bmxvYWRcbiAgICAvLyBpbiBXZWJLaXQsIEkgYXBwZW5kIC5kb3dubG9hZCB0byB0aGUgZmlsZW5hbWUuXG4gICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTY1NDQwXG4gICAgaWYgKHdlYmtpdF9yZXFfZnMgJiYgbmFtZSAhPT0gJ2Rvd25sb2FkJykge1xuICAgICAgbmFtZSArPSAnLmRvd25sb2FkJztcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IGZvcmNlX3NhdmVhYmxlX3R5cGUgfHwgd2Via2l0X3JlcV9mcykge1xuICAgICAgdGFyZ2V0X3ZpZXcgPSB2aWV3O1xuICAgIH1cbiAgICBpZiAoIXJlcV9mcykge1xuICAgICAgZnNfZXJyb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZnNfbWluX3NpemUgKz0gYmxvYi5zaXplO1xuICAgIHJlcV9mcyh2aWV3LlRFTVBPUkFSWSwgZnNfbWluX3NpemUsIGFib3J0YWJsZShmdW5jdGlvbiAoZnMpIHtcbiAgICAgIGZzLnJvb3QuZ2V0RGlyZWN0b3J5KCdzYXZlZCcsIGNyZWF0ZV9pZl9ub3RfZm91bmQsIGFib3J0YWJsZShmdW5jdGlvbiAoZGlyKSB7XG4gICAgICAgIHZhciBzYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICAgICAgICBkaXIuZ2V0RmlsZShuYW1lLCBjcmVhdGVfaWZfbm90X2ZvdW5kLCBhYm9ydGFibGUoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgIGZpbGUuY3JlYXRlV3JpdGVyKGFib3J0YWJsZShmdW5jdGlvbiAod3JpdGVyKSB7XG4gICAgICAgICAgICAgIHdyaXRlci5vbndyaXRlZW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IGZpbGUudG9VUkwoKTtcbiAgICAgICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoKGZpbGVzYXZlciwgJ3dyaXRlZW5kJywgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldm9rZShmaWxlKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgd3JpdGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gd3JpdGVyLmVycm9yO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5jb2RlICE9PSBlcnJvci5BQk9SVF9FUlIpIHtcbiAgICAgICAgICAgICAgICAgIGZzX2Vycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAnd3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSBhYm9ydCcuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHdyaXRlclsnb24nICsgZXZlbnRdID0gZmlsZXNhdmVyWydvbicgKyBldmVudF07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB3cml0ZXIud3JpdGUoYmxvYik7XG4gICAgICAgICAgICAgIGZpbGVzYXZlci5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5XUklUSU5HO1xuICAgICAgICAgICAgfSksIGZzX2Vycm9yKTtcbiAgICAgICAgICB9KSwgZnNfZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBkaXIuZ2V0RmlsZShuYW1lLCB7IGNyZWF0ZTogZmFsc2UgfSwgYWJvcnRhYmxlKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgICAgLy8gZGVsZXRlIGZpbGUgaWYgaXQgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICBmaWxlLnJlbW92ZSgpO1xuICAgICAgICAgIHNhdmUoKTtcbiAgICAgICAgfSksIGFib3J0YWJsZShmdW5jdGlvbiAoZXgpIHtcbiAgICAgICAgICBpZiAoZXguY29kZSA9PT0gZXguTk9UX0ZPVU5EX0VSUikge1xuICAgICAgICAgICAgc2F2ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmc19lcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSksIGZzX2Vycm9yKTtcbiAgICB9KSwgZnNfZXJyb3IpO1xuICB9O1xuXG4gIHZhciBGU19wcm90byA9IEZpbGVTYXZlci5wcm90b3R5cGU7XG4gIHZhciBzYXZlQXMgPSBmdW5jdGlvbiBzYXZlQXMoYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcbiAgICByZXR1cm4gbmV3IEZpbGVTYXZlcihibG9iLCBuYW1lLCBub19hdXRvX2JvbSk7XG4gIH07XG5cbiAgLy8gSUUgMTArIChuYXRpdmUgc2F2ZUFzKVxuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG4gICAgICBpZiAoIW5vX2F1dG9fYm9tKSBibG9iID0gYXV0b19ib20oYmxvYik7XG4gICAgICByZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYmxvYiwgbmFtZSB8fCAnZG93bmxvYWQnKTtcbiAgICB9O1xuICB9XG5cbiAgRlNfcHJvdG8uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZpbGVzYXZlciA9IHRoaXM7XG4gICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcbiAgICBkaXNwYXRjaChmaWxlc2F2ZXIsICdhYm9ydCcpO1xuICB9O1xuICBGU19wcm90by5yZWFkeVN0YXRlID0gRlNfcHJvdG8uSU5JVCA9IDA7XG4gIEZTX3Byb3RvLldSSVRJTkcgPSAxO1xuICBGU19wcm90by5ET05FID0gMjtcblxuICBGU19wcm90by5lcnJvciA9IEZTX3Byb3RvLm9ud3JpdGVzdGFydCA9IEZTX3Byb3RvLm9ucHJvZ3Jlc3MgPSBGU19wcm90by5vbndyaXRlID0gRlNfcHJvdG8ub25hYm9ydCA9IEZTX3Byb3RvLm9uZXJyb3IgPSBGU19wcm90by5vbndyaXRlZW5kID0gbnVsbDtcblxuICByZXR1cm4gc2F2ZUFzO1xufSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiB8fCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cgfHwgdW5kZWZpbmVkLmNvbnRlbnQpO1xuLy8gYHNlbGZgIGlzIHVuZGVmaW5lZCBpbiBGaXJlZm94IGZvciBBbmRyb2lkIGNvbnRlbnQgc2NyaXB0IGNvbnRleHRcbi8vIHdoaWxlIGB0aGlzYCBpcyBuc0lDb250ZW50RnJhbWVNZXNzYWdlTWFuYWdlclxuLy8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXG5leHBvcnRzLmRlZmF1bHQgPSBzYXZlQXM7IiwiaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuL3V0aWxzJ1xyXG5pbXBvcnQgeyAgY3VzdG9tQWxwaGFiZXQsIHVybEFscGhhYmV0IH0gZnJvbSAnbmFub2lkJ1xyXG5jb25zdCBuYW5vaWQgPSBjdXN0b21BbHBoYWJldCh1cmxBbHBoYWJldCwgMTApXHJcblxyXG5jb25zdCBOQU1FU1BBQ0VTID0ge1xyXG4gICAgU1lOQzogJ3N5bmMnLFxyXG4gICAgTE9DQUw6ICdsb2NhbCcsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWQgKG5hbWVzcGFjZSwga2V5cykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2hyb21lLnN0b3JhZ2VbbmFtZXNwYWNlXS5nZXQoa2V5cywgcmVzb2x2ZSkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlIChuYW1lc3BhY2UsIGtleVBhaXJzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBjaHJvbWUuc3RvcmFnZVtuYW1lc3BhY2VdLnNldChrZXlQYWlycywgcmVzb2x2ZSkpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkU291cmNlcyAoKSB7XHJcbiAgICBjb25zdCByZWdpc3RyeSA9IGF3YWl0IHJlYWQoTkFNRVNQQUNFUy5TWU5DLCB7J3NvdXJjZXMnOiAnW1wic291cmNlcy0xXCJdJ30pXHJcbiAgICByZXR1cm4gcGFyc2UocmVnaXN0cnksIFsnc291cmNlcy0xJ10pLnJlZHVjZSgoc291cmNlcywga2V5KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtzb3VyY2VzLCByZWFkKE5BTUVTUEFDRVMuU1lOQywge1trZXldOiAnW10nfSldKVxyXG4gICAgICAgICAgICAudGhlbigoW3NvdXJjZXMsIHNvdXJjZV0pID0+IHNvdXJjZXMuY29uY2F0KHBhcnNlKHNvdXJjZVtrZXldLCBbXSkpKVxyXG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKFtdKSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlU291cmNlcyAoc291cmNlcykge1xyXG4gICAgY29uc3QgcmVnaXN0cnkgPSBbXVxyXG4gICAgY29uc3QgdXBkYXRlcyA9IHt9XHJcbiAgICBmb3IgKGxldCB4ID0gMTsgeCA8PSBNYXRoLm1heCgxLCBNYXRoLmNlaWwoc291cmNlcy5sZW5ndGggLyAyMCkpOyB4KyspIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBgc291cmNlcy0ke3h9YFxyXG4gICAgICAgIHJlZ2lzdHJ5LnB1c2goa2V5KVxyXG4gICAgICAgIHVwZGF0ZXNba2V5XSA9IEpTT04uc3RyaW5naWZ5KHNvdXJjZXMuc2xpY2UoKHgtMSkgKiAyMCwgeCAqIDIwKSlcclxuICAgIH1cclxuICAgIHVwZGF0ZXMucmVnaXN0cnkgPSBKU09OLnN0cmluZ2lmeShyZWdpc3RyeSlcclxuICAgIHJldHVybiB3cml0ZShOQU1FU1BBQ0VTLlNZTkMsIHVwZGF0ZXMpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRTb3VyY2UgKHNvdXJjZSkge1xyXG4gICAgY29uc3Qgc291cmNlcyA9IGF3YWl0IHJlYWRTb3VyY2VzKClcclxuICAgIHNvdXJjZXMucHVzaCh7XHJcbiAgICAgICAgLi4uc291cmNlLFxyXG4gICAgICAgIGlkOiBuYW5vaWQoKVxyXG4gICAgfSlcclxuICAgIGF3YWl0IHdyaXRlU291cmNlcyhzb3VyY2VzKVxyXG4gICAgcmV0dXJuIHNvdXJjZXNcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNvdXJjZSAoc291cmNlSWQpIHtcclxuICAgIGNvbnN0IHNvdXJjZXMgPSBhd2FpdCByZWFkU291cmNlcygpXHJcbiAgICBjb25zdCBuZXdTb3VyY2VzID0gc291cmNlcy5maWx0ZXIoKHNvdXJjZSkgPT4gc291cmNlPy5pZCAhPT0gc291cmNlSWQpXHJcbiAgICBhd2FpdCB3cml0ZVNvdXJjZXMobmV3U291cmNlcylcclxuXHJcbiAgICByZXR1cm4gbmV3U291cmNlc1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsdGVyZWRTb3J0ZWRVcmxzICgpIHtcclxuICAgIGNvbnN0IHsgaGlkZGVuQ2hhcHRlcnM6IGhpZGRlbkNoYXB0ZXJzU3RyaW5nLCBoaWRlIH0gPSBhd2FpdCByZWFkKE5BTUVTUEFDRVMuU1lOQywge2hpZGRlbkNoYXB0ZXJzOiAne30nLCBoaWRlOiBEYXRlLm5vdygpfSlcclxuICAgIGNvbnN0IHsgdXJscyB9ID0gYXdhaXQgcmVhZChOQU1FU1BBQ0VTLkxPQ0FMLCB7dXJsczogJ1tdJ30pXHJcblxyXG4gICAgY29uc3QgaGlkZGVuQ2hhcHRlcnMgPSBwYXJzZShoaWRkZW5DaGFwdGVyc1N0cmluZywge30pXHJcbiAgICBjb25zdCB1cmxMaXN0ID0gcGFyc2UodXJscywgW10pXHJcblxyXG4gICAgY29uc3QgY2hlY2tPbGQgPSAoY2hhcHRlcikgPT4ge1xyXG4gICAgICAgIGlmIChoaWRlICYmIGNoYXB0ZXIuY3JlYXRlZCA8IGhpZGUgfHwgaGlkZGVuQ2hhcHRlcnNbY2hhcHRlci5pZF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbb2xkVXJscywgbmV3VXJsc10gPSBPYmplY3QudmFsdWVzKHVybExpc3QpXHJcbiAgICAgICAgLnNvcnQoKHVybDEsIHVybDIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGlmZiA9IHVybDIuY3JlYXRlZCAtIHVybDEuY3JlYXRlZDtcclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYpIDwgNTAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHVybDEpLmxvY2FsZUNvbXBhcmUodXJsMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAucmVkdWNlKChbb2xkVXJscywgbmV3VXJsc10sIHVybCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tPbGQodXJsKSkge1xyXG4gICAgICAgICAgICAgICAgb2xkVXJscy5wdXNoKHVybClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1VybHMucHVzaCh1cmwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFtvbGRVcmxzLCBuZXdVcmxzXVxyXG4gICAgICAgIH0sIFtbXSwgW11dKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgb2xkVXJscyxcclxuICAgICAgICBuZXdVcmxzXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRIaWRkZW5DaGFwdGVyKGlkKSB7XHJcbiAgICBjb25zdCBoaWRkZW5DaGFwdGVycyA9IHBhcnNlKGF3YWl0IHJlYWQoTkFNRVNQQUNFUy5TWU5DLCB7aGlkZGVuQ2hhcHRlcnM6ICd7fSd9KSwge30pXHJcbiAgICBoaWRkZW5DaGFwdGVyc1tpZF0gPSB0cnVlXHJcbiAgICByZXR1cm4gd3JpdGUoTkFNRVNQQUNFUy5TWU5DLCB7aGlkZGVuQ2hhcHRlcnM6IEpTT04uc3RyaW5naWZ5KGhpZGRlbkNoYXB0ZXJzKX0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRocm90dGxlZFVybFdyaXRlciAoKSB7XHJcbiAgICBsZXQgdXJsVXBkYXRlID0gW11cclxuICAgIGxldCB3cml0ZVRpbWVvdXRcclxuICAgIHJldHVybiAodXJsKSA9PiB7XHJcbiAgICAgICAgaWYgKCF3cml0ZVRpbWVvdXQpIHtcclxuICAgICAgICAgICAgd3JpdGVUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdVcmxzID0gdXJsVXBkYXRlXHJcbiAgICAgICAgICAgICAgICB1cmxVcGRhdGUgPSBbXVxyXG4gICAgICAgICAgICAgICAgd3JpdGVUaW1lb3V0ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHVybHM6IHJhd1VybHMgfSA9IGF3YWl0IHJlYWQoTkFNRVNQQUNFUy5MT0NBTCwgeyB1cmxzOiAne30nIH0pXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmxzID0gcGFyc2UocmF3VXJscywge30pXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGUgPSB7IC4uLnVybHMgfVxyXG4gICAgICAgICAgICAgICAgbmV3VXJscy5mb3JFYWNoKCh1cmwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVbdXJsLnVybF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG5hbm9pZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlKSA+IE9iamVjdC5rZXlzKHVybHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGUoTkFNRVNQQUNFUy5MT0NBTCwgeyB1cmxzOiBKU09OLnN0cmluZ2lmeSh1cGRhdGUpIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMClcclxuICAgICAgICB9XHJcbiAgICAgICAgdXJsVXBkYXRlLnB1c2godXJsKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYWRkVXJsID0gY3JlYXRlVGhyb3R0bGVkVXJsV3JpdGVyKClcclxuXHJcbiIsIi8vIFRoaXMgZmlsZSByZXBsYWNlcyBgaW5kZXguanNgIGluIGJ1bmRsZXJzIGxpa2Ugd2VicGFjayBvciBSb2xsdXAsXG4vLyBhY2NvcmRpbmcgdG8gYGJyb3dzZXJgIGNvbmZpZyBpbiBgcGFja2FnZS5qc29uYC5cblxuaW1wb3J0IHsgdXJsQWxwaGFiZXQgfSBmcm9tICcuL3VybC1hbHBoYWJldC9pbmRleC5qcydcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gQWxsIGJ1bmRsZXJzIHdpbGwgcmVtb3ZlIHRoaXMgYmxvY2sgaW4gdGhlIHByb2R1Y3Rpb24gYnVuZGxlLlxuICBpZiAoXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyAmJlxuICAgIHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdSZWFjdCBOYXRpdmUgZG9lcyBub3QgaGF2ZSBhIGJ1aWx0LWluIHNlY3VyZSByYW5kb20gZ2VuZXJhdG9yLiAnICtcbiAgICAgICAgJ0lmIHlvdSBkb27igJl0IG5lZWQgdW5wcmVkaWN0YWJsZSBJRHMgdXNlIGBuYW5vaWQvbm9uLXNlY3VyZWAuICcgK1xuICAgICAgICAnRm9yIHNlY3VyZSBJRHMsIGltcG9ydCBgcmVhY3QtbmF0aXZlLWdldC1yYW5kb20tdmFsdWVzYCAnICtcbiAgICAgICAgJ2JlZm9yZSBOYW5vIElELidcbiAgICApXG4gIH1cbiAgaWYgKHR5cGVvZiBtc0NyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNyeXB0byA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnSW1wb3J0IGZpbGUgd2l0aCBgaWYgKCF3aW5kb3cuY3J5cHRvKSB3aW5kb3cuY3J5cHRvID0gd2luZG93Lm1zQ3J5cHRvYCcgK1xuICAgICAgICAnIGJlZm9yZSBpbXBvcnRpbmcgTmFubyBJRCB0byBmaXggSUUgMTEgc3VwcG9ydCdcbiAgICApXG4gIH1cbiAgaWYgKHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1lvdXIgYnJvd3NlciBkb2VzIG5vdCBoYXZlIHNlY3VyZSByYW5kb20gZ2VuZXJhdG9yLiAnICtcbiAgICAgICAgJ0lmIHlvdSBkb27igJl0IG5lZWQgdW5wcmVkaWN0YWJsZSBJRHMsIHlvdSBjYW4gdXNlIG5hbm9pZC9ub24tc2VjdXJlLidcbiAgICApXG4gIH1cbn1cblxubGV0IHJhbmRvbSA9IGJ5dGVzID0+IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKVxuXG5sZXQgY3VzdG9tUmFuZG9tID0gKGFscGhhYmV0LCBzaXplLCBnZXRSYW5kb20pID0+IHtcbiAgLy8gRmlyc3QsIGEgYml0bWFzayBpcyBuZWNlc3NhcnkgdG8gZ2VuZXJhdGUgdGhlIElELiBUaGUgYml0bWFzayBtYWtlcyBieXRlc1xuICAvLyB2YWx1ZXMgY2xvc2VyIHRvIHRoZSBhbHBoYWJldCBzaXplLiBUaGUgYml0bWFzayBjYWxjdWxhdGVzIHRoZSBjbG9zZXN0XG4gIC8vIGAyXjMxIC0gMWAgbnVtYmVyLCB3aGljaCBleGNlZWRzIHRoZSBhbHBoYWJldCBzaXplLlxuICAvLyBGb3IgZXhhbXBsZSwgdGhlIGJpdG1hc2sgZm9yIHRoZSBhbHBoYWJldCBzaXplIDMwIGlzIDMxICgwMDAxMTExMSkuXG4gIC8vIGBNYXRoLmNsejMyYCBpcyBub3QgdXNlZCwgYmVjYXVzZSBpdCBpcyBub3QgYXZhaWxhYmxlIGluIGJyb3dzZXJzLlxuICBsZXQgbWFzayA9ICgyIDw8IChNYXRoLmxvZyhhbHBoYWJldC5sZW5ndGggLSAxKSAvIE1hdGguTE4yKSkgLSAxXG4gIC8vIFRob3VnaCwgdGhlIGJpdG1hc2sgc29sdXRpb24gaXMgbm90IHBlcmZlY3Qgc2luY2UgdGhlIGJ5dGVzIGV4Y2VlZGluZ1xuICAvLyB0aGUgYWxwaGFiZXQgc2l6ZSBhcmUgcmVmdXNlZC4gVGhlcmVmb3JlLCB0byByZWxpYWJseSBnZW5lcmF0ZSB0aGUgSUQsXG4gIC8vIHRoZSByYW5kb20gYnl0ZXMgcmVkdW5kYW5jeSBoYXMgdG8gYmUgc2F0aXNmaWVkLlxuXG4gIC8vIE5vdGU6IGV2ZXJ5IGhhcmR3YXJlIHJhbmRvbSBnZW5lcmF0b3IgY2FsbCBpcyBwZXJmb3JtYW5jZSBleHBlbnNpdmUsXG4gIC8vIGJlY2F1c2UgdGhlIHN5c3RlbSBjYWxsIGZvciBlbnRyb3B5IGNvbGxlY3Rpb24gdGFrZXMgYSBsb3Qgb2YgdGltZS5cbiAgLy8gU28sIHRvIGF2b2lkIGFkZGl0aW9uYWwgc3lzdGVtIGNhbGxzLCBleHRyYSBieXRlcyBhcmUgcmVxdWVzdGVkIGluIGFkdmFuY2UuXG5cbiAgLy8gTmV4dCwgYSBzdGVwIGRldGVybWluZXMgaG93IG1hbnkgcmFuZG9tIGJ5dGVzIHRvIGdlbmVyYXRlLlxuICAvLyBUaGUgbnVtYmVyIG9mIHJhbmRvbSBieXRlcyBnZXRzIGRlY2lkZWQgdXBvbiB0aGUgSUQgc2l6ZSwgbWFzayxcbiAgLy8gYWxwaGFiZXQgc2l6ZSwgYW5kIG1hZ2ljIG51bWJlciAxLjYgKHVzaW5nIDEuNiBwZWFrcyBhdCBwZXJmb3JtYW5jZVxuICAvLyBhY2NvcmRpbmcgdG8gYmVuY2htYXJrcykuXG5cbiAgLy8gYC1+ZiA9PiBNYXRoLmNlaWwoZilgIGlmIGYgaXMgYSBmbG9hdFxuICAvLyBgLX5pID0+IGkgKyAxYCBpZiBpIGlzIGFuIGludGVnZXJcbiAgbGV0IHN0ZXAgPSAtfigoMS42ICogbWFzayAqIHNpemUpIC8gYWxwaGFiZXQubGVuZ3RoKVxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGV0IGlkID0gJydcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgbGV0IGJ5dGVzID0gZ2V0UmFuZG9tKHN0ZXApXG4gICAgICAvLyBBIGNvbXBhY3QgYWx0ZXJuYXRpdmUgZm9yIGBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7IGkrKylgLlxuICAgICAgbGV0IGogPSBzdGVwXG4gICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgIC8vIEFkZGluZyBgfHwgJydgIHJlZnVzZXMgYSByYW5kb20gYnl0ZSB0aGF0IGV4Y2VlZHMgdGhlIGFscGhhYmV0IHNpemUuXG4gICAgICAgIGlkICs9IGFscGhhYmV0W2J5dGVzW2pdICYgbWFza10gfHwgJydcbiAgICAgICAgaWYgKGlkLmxlbmd0aCA9PT0gc2l6ZSkgcmV0dXJuIGlkXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmxldCBjdXN0b21BbHBoYWJldCA9IChhbHBoYWJldCwgc2l6ZSkgPT4gY3VzdG9tUmFuZG9tKGFscGhhYmV0LCBzaXplLCByYW5kb20pXG5cbmxldCBuYW5vaWQgPSAoc2l6ZSA9IDIxKSA9PiB7XG4gIGxldCBpZCA9ICcnXG4gIGxldCBieXRlcyA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoc2l6ZSkpXG5cbiAgLy8gQSBjb21wYWN0IGFsdGVybmF0aXZlIGZvciBgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwOyBpKyspYC5cbiAgd2hpbGUgKHNpemUtLSkge1xuICAgIC8vIEl0IGlzIGluY29ycmVjdCB0byB1c2UgYnl0ZXMgZXhjZWVkaW5nIHRoZSBhbHBoYWJldCBzaXplLlxuICAgIC8vIFRoZSBmb2xsb3dpbmcgbWFzayByZWR1Y2VzIHRoZSByYW5kb20gYnl0ZSBpbiB0aGUgMC0yNTUgdmFsdWVcbiAgICAvLyByYW5nZSB0byB0aGUgMC02MyB2YWx1ZSByYW5nZS4gVGhlcmVmb3JlLCBhZGRpbmcgaGFja3MsIHN1Y2hcbiAgICAvLyBhcyBlbXB0eSBzdHJpbmcgZmFsbGJhY2sgb3IgbWFnaWMgbnVtYmVycywgaXMgdW5uZWNjZXNzYXJ5IGJlY2F1c2VcbiAgICAvLyB0aGUgYml0bWFzayB0cmltcyBieXRlcyBkb3duIHRvIHRoZSBhbHBoYWJldCBzaXplLlxuICAgIGxldCBieXRlID0gYnl0ZXNbc2l6ZV0gJiA2M1xuICAgIGlmIChieXRlIDwgMzYpIHtcbiAgICAgIC8vIGAwLTlhLXpgXG4gICAgICBpZCArPSBieXRlLnRvU3RyaW5nKDM2KVxuICAgIH0gZWxzZSBpZiAoYnl0ZSA8IDYyKSB7XG4gICAgICAvLyBgQS1aYFxuICAgICAgaWQgKz0gKGJ5dGUgLSAyNikudG9TdHJpbmcoMzYpLnRvVXBwZXJDYXNlKClcbiAgICB9IGVsc2UgaWYgKGJ5dGUgPCA2Mykge1xuICAgICAgaWQgKz0gJ18nXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkICs9ICctJ1xuICAgIH1cbiAgfVxuICByZXR1cm4gaWRcbn1cblxuZXhwb3J0IHsgbmFub2lkLCBjdXN0b21BbHBoYWJldCwgY3VzdG9tUmFuZG9tLCB1cmxBbHBoYWJldCwgcmFuZG9tIH1cbiIsIi8vIFRoaXMgYWxwaGFiZXQgdXNlcyBgQS1aYS16MC05Xy1gIHN5bWJvbHMuIFRoZSBnZW5ldGljIGFsZ29yaXRobSBoZWxwZWRcbi8vIG9wdGltaXplIHRoZSBnemlwIGNvbXByZXNzaW9uIGZvciB0aGlzIGFscGhhYmV0LlxubGV0IHVybEFscGhhYmV0ID1cbiAgJ01vZHVsZVN5bWJoYXNPd25Qci0wMTIzNDU2Nzg5QUJDREVGR0hOUlZmZ2N0aVV2el9LcVlUSmtMeHBaWElqUVcnXG5cbmV4cG9ydCB7IHVybEFscGhhYmV0IH1cbiIsImltcG9ydCB7IGFkZFNvdXJjZSwgcmVhZFNvdXJjZXMgfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxubGV0IGN1cnJlbnRTb3VyY2UgPSBudWxsXHJcblxyXG5jb25zdCBib29rbWFyayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9va21hcmtcIik7XHJcbmNvbnN0IGJvb2ttYXJrVHJhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvb2ttYXJrLXRyYWNrXCIpO1xyXG5jb25zdCBib29rbWFya0hpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvb2ttYXJrLWhpZGVcIik7XHJcbmNvbnN0IGJvb2ttYXJrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvb2ttYXJrLXRpdGxlXCIpO1xyXG5jb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIik7XHJcbmNvbnN0IHVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXJsXCIpO1xyXG5jb25zdCBtYW5nYUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYW5nYUlkXCIpO1xyXG5cclxuYm9va21hcmtIaWRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBib29rbWFyay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICBib29rbWFya1RpdGxlLmlubmVyVGV4dCA9ICcnXHJcbiAgICBjdXJyZW50U291cmNlID0gbnVsbFxyXG59KTtcclxuXHJcbmJvb2ttYXJrVHJhY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGJvb2ttYXJrLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIGJvb2ttYXJrVGl0bGUuaW5uZXJUZXh0ID0gJydcclxuICAgIGFkZFNvdXJjZShjdXJyZW50U291cmNlKVxyXG4gICAgY3VycmVudFNvdXJjZSA9IG51bGxcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRlc3RCb29rbWFyayAoKSB7XHJcbiAgICBjaHJvbWUudGFicy5xdWVyeShcclxuICAgICAgICB7IGFjdGl2ZTogdHJ1ZSwgd2luZG93SWQ6IGNocm9tZS53aW5kb3dzLldJTkRPV19JRF9DVVJSRU5UIH0sXHJcbiAgICAgICAgKHRhYnMpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0YWJzWzBdLnVybC5pbmNsdWRlcygnY2hyb21lOi8vJykpIHtcclxuICAgICAgICAgICAgICAgIGNocm9tZS5zY3JpcHRpbmcuZXhlY3V0ZVNjcmlwdCh7IHRhcmdldDogeyB0YWJJZDogdGFic1swXS5pZCB9LCBmdW5jdGlvbjogdGVzdCB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgKVxyXG59XHJcblxyXG5mdW5jdGlvbiB0ZXN0KCkge1xyXG4gICAgZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCBmYWxsYmFjaykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlkcyA9IFtcclxuICAgICAgICB3aW5kb3c/Lm1hbmdhPy5tYW5nYV9pZCxcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmF0aW5nLXBvc3QtaWQnKT8udmFsdWUsXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndwLW1hbmdhLWFjdGlvbi1idXR0b24nKT8uZGF0YXNldD8uWydwb3N0J10sXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXB0ZXItc2VsZWN0aW9uJyk/LmRhdGFzZXQ/LlsnbWFuZ2EnXSxcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuZ2EtY2hhcHRlcnMtaG9sZGVyJyk/LmRhdGFzZXQ/LlsnaWQnXSxcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuZ2EtcmVhZGluZy1uYXYtaGVhZCcpPy5kYXRhc2V0Py5bJ2lkJ10sXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmdhLXJlYWRpbmctbmF2LWZvb3QnKT8uZGF0YXNldD8uWydpZCddLFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpbmtbcmVsPXNob3J0bGlua10nKT8uaHJlZj8uc3BsaXQoJz9wPScpWzFdXHJcbiAgICBdXHJcbiAgICAgICAgLmZpbHRlcigodGl0bGUpID0+IHRpdGxlKVxyXG4gICAgICAgIC5yZWR1Y2UoKG1hcCwgaWQpID0+IHtcclxuICAgICAgICAgICAgbWFwW2lkXSA9IHR5cGVvZiBtYXBbaWRdID09PSAnbnVtYmVyJyA/IG1hcFtpZF0gKyAxIDogMVxyXG4gICAgICAgICAgICByZXR1cm4gbWFwXHJcbiAgICAgICAgfSwge30pXHJcbiAgICBjb25zdCBpZCA9IE9iamVjdC5rZXlzKGlkcykuc29ydCgoaWQxLCBpZDIpID0+IGlkc1tpZDFdIC0gaWRzW2lkMl0pWzBdXHJcblxyXG4gICAgY29uc3QgdGl0bGVzID0gW1xyXG4gICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0W3R5cGU9XCJhcHBsaWNhdGlvbi9sZCtqc29uXCJdJykpXHJcbiAgICAgICAgICAgIC5tYXAoc2NyaXB0ID0+IHBhcnNlKHNjcmlwdC5pbm5lclRleHQpPy5oZWFkbGluZSkuZmluZChoID0+IGgpLFxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFwdGVyLWhlYWRpbmcnKT8uaW5uZXJUZXh0Py5zcGxpdCgnIC0gJylbMF0sXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvc3QtdGl0bGUgaDEnKT8uaW5uZXJUZXh0LFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYXRlLXRpdGxlJyk/LnRpdGxlXHJcbiAgICBdXHJcbiAgICAgICAgLmZpbHRlcigodGl0bGUpID0+IHRpdGxlKVxyXG4gICAgICAgIC5yZWR1Y2UoKG1hcCwgdGl0bGUpID0+IHtcclxuICAgICAgICAgICAgbWFwW3RpdGxlXSA9IHR5cGVvZiBtYXBbdGl0bGVdID09PSAnbnVtYmVyJyA/IG1hcFt0aXRsZV0gKyAxIDogMVxyXG4gICAgICAgICAgICByZXR1cm4gbWFwXHJcbiAgICAgICAgfSwge30pXHJcbiAgICBjb25zdCB0aXRsZSA9IE9iamVjdC5rZXlzKHRpdGxlcykuc29ydCgodGl0bGUxLCB0aXRsZTIpID0+IHRpdGxlc1t0aXRsZTFdIC0gdGl0bGVzW3RpdGxlMl0pWzBdXHJcblxyXG4gICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoeyBpZCwgdGl0bGUsIHVybDogZG9jdW1lbnQ/LmxvY2F0aW9uPy5vcmlnaW4gPyBgJHtkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW59L3dwLWFkbWluL2FkbWluLWFqYXgucGhwYCA6IG51bGwgfSlcclxufVxyXG5cclxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGFzeW5jIChyZXF1ZXN0KSA9PiB7XHJcbiAgICBpZiAocmVxdWVzdC5pZCAmJiByZXF1ZXN0LnRpdGxlICYmIHJlcXVlc3QudXJsKSB7XHJcbiAgICAgICAgY29uc3Qgc291cmNlcyA9IGF3YWl0IHJlYWRTb3VyY2VzKClcclxuXHJcbiAgICAgICAgaWYgKCFzb3VyY2VzLnNvbWUoKHNvdXJjZSkgPT4gc291cmNlLnVybCA9PT0gcmVxdWVzdC51cmwgJiYgU3RyaW5nKHNvdXJjZS5tYW5nYUlkKSA9PT0gU3RyaW5nKHJlcXVlc3QuaWQpKSkge1xyXG4gICAgICAgICAgICBib29rbWFyay5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcbiAgICAgICAgICAgIGJvb2ttYXJrVGl0bGUuaW5uZXJUZXh0ID0gYERvIHlvdSB3YW50IHRvIHN0YXJ0IHRyYWNraW5nIFwiJHtyZXF1ZXN0LnRpdGxlfVwiP2BcclxuICAgICAgICAgICAgY3VycmVudFNvdXJjZSA9IHtcclxuICAgICAgICAgICAgICAgIG1hbmdhSWQ6IHJlcXVlc3QuaWQsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogcmVxdWVzdC50aXRsZSxcclxuICAgICAgICAgICAgICAgIHVybDogcmVxdWVzdC51cmxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aXRsZS52YWx1ZSA9IGN1cnJlbnRTb3VyY2UudGl0bGU7XHJcbiAgICAgICAgICAgIHVybC52YWx1ZSA9IGN1cnJlbnRTb3VyY2UudXJsO1xyXG4gICAgICAgICAgICBtYW5nYUlkLnZhbHVlID0gY3VycmVudFNvdXJjZS5tYW5nYUlkO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGl0bGUudmFsdWUgPSBcIlwiO1xyXG4gICAgdXJsLnZhbHVlID0gXCJcIjtcclxuICAgIG1hbmdhSWQudmFsdWUgPSBcIlwiO1xyXG4gICAgYm9va21hcmsuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgYm9va21hcmtUaXRsZS5pbm5lclRleHQgPSAnJ1xyXG4gICAgY3VycmVudFNvdXJjZSA9IG51bGxcclxufSkiLCJpbXBvcnQgc2F2ZUFzIGZyb20gJ3NhdmUtYXMnXHJcbmltcG9ydCB7IHJlYWRTb3VyY2VzLCB3cml0ZVNvdXJjZXMgfSBmcm9tICcuL2RiJztcclxuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmNvbnN0IGltcG9ydEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltcG9ydFwiKTtcclxuY29uc3QgZXhwb3J0RWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhwb3J0XCIpO1xyXG5cclxuaW1wb3J0RWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdXHJcbiAgICBjb25zdCBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBmci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZXMgPSBwYXJzZShmci5yZXN1bHQsIFtdKVxyXG4gICAgICAgIGNvbnN0IGNsZWFuID0gc291cmNlcy5maWx0ZXIoKHNvdXJjZSkgPT4gc291cmNlPy50aXRsZSAmJiBzb3VyY2UudXJsICYmIHNvdXJjZS5tYW5nYUlkKVxyXG4gICAgICAgIGlmIChjbGVhbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgd3JpdGVTb3VyY2VzKGNsZWFuKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpbXBvcnRFbGVtLmZpbGVzID0gbnVsbFxyXG4gICAgfSlcclxuICAgIGZyLnJlYWRBc1RleHQoZmlsZSk7XHJcbn0pXHJcblxyXG5leHBvcnRFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgcmVhZFNvdXJjZXMoKVxyXG4gICAgICAgIC50aGVuKChzb3VyY2VzKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHNvdXJjZXMpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSlcclxuICAgICAgICAgICAgc2F2ZUFzKGJsb2IsICdtYW5nYXBvbGwuanNvbicpXHJcbiAgICAgICAgfSlcclxufSkiLCJpbXBvcnQgcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gXCJyZWdlbmVyYXRvci1ydW50aW1lXCJcbmltcG9ydCB7IHBhZCB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgKiBhcyBkYiBmcm9tICcuL2RiJ1xuaW1wb3J0IHsgdGVzdEJvb2ttYXJrIH0gZnJvbSBcIi4vYm9va21hcmtcIlxuaW1wb3J0ICcuL2ltcG9ydCdcblxuY29uc3QgaGlkZUFsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGlkZVwiKTtcbmNvbnN0IHBvcHVwVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvcHVwVGl0bGVcIik7XG5jb25zdCBhZGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFwiKTtcbmNvbnN0IGFkZFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFNlY3Rpb25cIik7XG5jb25zdCB1cmxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cmxzXCIpO1xuY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpO1xuY29uc3QgdXJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cmxcIik7XG5jb25zdCBtYW5nYUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYW5nYUlkXCIpO1xuY29uc3Qgc3VibWl0U291cmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRTb3VyY2VcIik7XG5jb25zdCBzb3VyY2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3VyY2VzXCIpO1xuXG5sZXQgbWF4T2xkID0gMjVcblxuaGlkZUFsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtcbiAgICAgICAgaGlkZTogRGF0ZS5ub3coKSxcbiAgICAgICAgaGlkZGVuQ2hhcHRlcnM6ICd7fSdcbiAgICB9KVxufSk7XG5cbnVybHMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgIGNvbnN0IGNsb3Nlc3RIaWRlID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5yb3cgLmhpZGUnKVxuICAgIGlmIChjbG9zZXN0SGlkZSAmJiBjbG9zZXN0SGlkZS5kYXRhc2V0W1wiaWRcIl0gJiYgdXJscy5jb250YWlucyhjbG9zZXN0SGlkZSkpIHtcbiAgICAgICAgZGIuYWRkSGlkZGVuQ2hhcHRlcihjbG9zZXN0SGlkZS5kYXRhc2V0W1wiaWRcIl0pXG4gICAgfVxuICAgIGNvbnN0IGNsb3Nlc3RMaW5rID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5yb3cubmV3IC5saW5rJylcbiAgICBpZiAoY2xvc2VzdExpbmsgJiYgY2xvc2VzdExpbmsuZGF0YXNldFtcImlkXCJdICYmIHVybHMuY29udGFpbnMoY2xvc2VzdExpbmspKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgYXdhaXQgZGIuYWRkSGlkZGVuQ2hhcHRlcihjbG9zZXN0TGluay5kYXRhc2V0W1wiaWRcIl0pXG4gICAgICAgIHdpbmRvdy5vcGVuKGNsb3Nlc3RMaW5rLmhyZWYsICdfYmxhbmsnKVxuICAgIH1cbiAgICBjb25zdCBjbG9zZXN0TW9yZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuYWN0aW9uLmxvYWQtbW9yZScpXG4gICAgaWYgKGNsb3Nlc3RNb3JlICYmIHVybHMuY29udGFpbnMoY2xvc2VzdE1vcmUpKSB7XG4gICAgICAgIG1heE9sZCArPSBtYXhPbGRcbiAgICAgICAgd3JpdGVVcmxzKClcbiAgICB9XG59KTtcblxuc291cmNlcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgY2xvc2VzdCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcucm93IC5hY3Rpb24uZGVsZXRlJylcbiAgICBpZiAoY2xvc2VzdCAmJiBjbG9zZXN0LmRhdGFzZXRbXCJpZFwiXSAmJiBzb3VyY2VzLmNvbnRhaW5zKGNsb3Nlc3QpKSB7XG4gICAgICAgIGRiLmRlbGV0ZVNvdXJjZShjbG9zZXN0LmRhdGFzZXRbXCJpZFwiXSlcbiAgICAgICAgY2xvc2VzdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3Rpb24nKVxuICAgIH1cbn0pO1xuXG5hZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoYWRkU2VjdGlvbi5zdHlsZS5kaXNwbGF5ICE9PSAnZmxleCcpIHtcbiAgICAgICAgYWRkU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG4gICAgICAgIHNvdXJjZXMuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgdXJscy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGhpZGVBbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBwb3B1cFRpdGxlLmlubmVyVGV4dCA9ICdNYW5nYSBTZXR0aW5ncydcbiAgICAgICAgYWRkLmlubmVyVGV4dCA9ICdDaGFwdGVycydcbiAgICAgICAgc291cmNlcy5pbm5lckhUTUwgPSAnPGxpIGNsYXNzPVwicm93XCIgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+Li4ubG9hZGluZzwvbGk+J1xuICAgICAgICB3cml0ZVNvdXJjZXMoKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYWRkU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIHNvdXJjZXMuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICB1cmxzLnN0eWxlLmRpc3BsYXkgPSAnJ1xuICAgICAgICBhZGQuaW5uZXJUZXh0ID0gJ01hbmdhIFNldHRpbmdzJ1xuICAgICAgICBoaWRlQWxsLnN0eWxlLmRpc3BsYXkgPSAnJ1xuICAgICAgICBwb3B1cFRpdGxlLmlubmVyVGV4dCA9ICdDaGFwdGVycydcbiAgICB9XG59KTtcblxuc3VibWl0U291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKHRpdGxlLnZhbHVlICYmIHVybC52YWx1ZSAmJiBtYW5nYUlkLnZhbHVlKSB7XG4gICAgICAgIHN1Ym1pdFNvdXJjZS5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgZGIuYWRkU291cmNlKHtcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZS52YWx1ZSxcbiAgICAgICAgICAgIHVybDogdXJsLnZhbHVlLFxuICAgICAgICAgICAgbWFuZ2FJZDogbWFuZ2FJZC52YWx1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aXRsZS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdXJsLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBtYW5nYUlkLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBzdWJtaXRTb3VyY2UuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5hc3luYyBmdW5jdGlvbiB3cml0ZVNvdXJjZXMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRiLnJlYWRTb3VyY2VzKClcblxuICAgIHNvdXJjZXMuaW5uZXJIVE1MID0gZGF0YVxuICAgICAgICAuc29ydCgoc291cmNlMSwgc291cmNlMikgPT4gU3RyaW5nKHNvdXJjZTEudGl0bGUpLmxvY2FsZUNvbXBhcmUoc291cmNlMj8udGl0bGUpKVxuICAgICAgICAubWFwKChzb3VyY2UpID0+IChcbiAgICAgICAgICAgIGA8bGkgY2xhc3M9XCJyb3cgc291cmNlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGFcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPiR7c291cmNlLnRpdGxlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYW5nYS1pZFwiPig8Yj5NYW5nYS1JZDwvYj46ICR7c291cmNlLm1hbmdhSWR9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1cmxcIiB0aXRsZT1cIiR7c291cmNlLnVybH1cIj48Yj5Vcmw8L2I+OiAke3NvdXJjZS51cmx9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGVsZXRlIGFjdGlvblwiIGRhdGEtaWQ9XCIke3NvdXJjZS5pZH1cIj5EZWxldGU8L3NwYW4+XG4gICAgICAgICAgICA8L2xpPmBcbiAgICAgICAgKSlcbiAgICAgICAgLmpvaW4oJ1xcbicpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVybFJlbmRlcmVyKGlzT2xkKSB7XG4gICAgcmV0dXJuIChjaGFwdGVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjaGFwdGVyLmNyZWF0ZWQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBTdHJpbmcoY2hhcHRlci51cmwpLm1hdGNoKC9cXC9bXlxcL10qaGFwdGVyW15cXC9cXGRdKihcXGQqKVteXFxkXFwvXSpbXlxcL10qXFwvLykgfHwgW11cbiAgICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke3BhZChkYXRlLmdldEhvdXJzKCkpfToke3BhZChkYXRlLmdldE1pbnV0ZXMoKSl9YFxuICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gYCR7cGFkKGRhdGUuZ2V0RGF0ZSgpKX0uJHtwYWQoZGF0ZS5nZXRNb250aCgpICsgMSl9LiR7U3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc2xpY2UoLTIpfWBcbiAgICAgICAgY29uc3QgZnVsbERhdGUgPSBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA9PT0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gPyB0aW1lU3RyaW5nIDogZGF0ZVN0cmluZ1xuXG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJyb3cke2lzT2xkID8gJyBvbGQnIDogJyBuZXcnfVwiPlxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwibGlua1wiIGhyZWY9XCIke2NoYXB0ZXIudXJsfVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyXCIgZGF0YS1pZD1cIiR7Y2hhcHRlci5pZH1cIj5cbiAgICAgICAgICAgICAgICAgICAgJHtjaGFwdGVyLnRpdGxlfSAtIENoYXB0ZXIgJHtyZXN1bHRbMV19XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGF0ZS13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkYXRlXCI+JHtmdWxsRGF0ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoaWRlXCIgZGF0YS1pZD1cIiR7Y2hhcHRlci5pZH1cIj5IaWRlPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGk+YFxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gd3JpdGVVcmxzKCkge1xuICAgIGNvbnN0IHsgbmV3VXJscywgb2xkVXJscyB9ID0gYXdhaXQgZGIuZ2V0RmlsdGVyZWRTb3J0ZWRVcmxzKClcbiAgICBjb25zdCBuZXdSb3dzID0gbmV3VXJscy5tYXAoY3JlYXRlVXJsUmVuZGVyZXIoZmFsc2UpKVxuICAgIGNvbnN0IG9sZFJvd3MgPSBvbGRVcmxzLm1hcChjcmVhdGVVcmxSZW5kZXJlcih0cnVlKSlcblxuICAgIGlmIChuZXdSb3dzLmxlbmd0aCB8fCBvbGRSb3dzLmxlbmd0aCkge1xuICAgICAgICB1cmxzLmlubmVySFRNTCA9IG5ld1Jvd3NcbiAgICAgICAgICAgIC5jb25jYXQoYDxsaSBjbGFzcz1cIm9sZC1jaGFwdGVyc1wiPk9sZCBDaGFwdGVyczwvbGk+YClcbiAgICAgICAgICAgIC5jb25jYXQob2xkUm93cy5zbGljZSgwLCBtYXhPbGQpKVxuICAgICAgICAgICAgLmNvbmNhdChvbGRSb3dzLmxlbmd0aCA+IG1heE9sZCA/IFtcbiAgICAgICAgICAgICAgICBgPGxpIGNsYXNzPVwiYWN0aW9uIGxvYWQtbW9yZVwiPkxvYWQgJHtNYXRoLm1pbihtYXhPbGQsIG9sZFJvd3MubGVuZ3RoIC0gbWF4T2xkKX0gbW9yZSBvbGQgY2hhcHRlcnMuLi48L2xpPmBcbiAgICAgICAgICAgIF0gOiBbXSlcbiAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IG5ld1Jvd3MubGVuZ3RoID8gYCgke25ld1Jvd3MubGVuZ3RofSkgTWFuZ2EgUG9sbGAgOiBcIk1hbmdhIFBvbGxcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB1cmxzLmlubmVySFRNTCA9ICc8bGkgY2xhc3M9XCJyb3dcIj5ObyBDaGFwdGVycyBhdmFpbGFibGUuPC9saT4nO1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiTWFuZ2EgUG9sbFwiO1xuICAgIH1cbn1cblxuY2hyb21lLnN0b3JhZ2Uub25DaGFuZ2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgaWYgKFsnaGlkZScsICdoaWRkZW5DaGFwdGVycycsICd1cmxzJ10uc29tZShjaGFuZ2VzLmhhc093blByb3BlcnR5LmJpbmQoY2hhbmdlcykpKSB7XG4gICAgICAgIHdyaXRlVXJscygpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhjaGFuZ2VzKS5zb21lKGNoYW5nZSA9PiBjaGFuZ2UuaW5jbHVkZXMoJ3NvdXJjZXMnKSkpIHtcbiAgICAgICAgd3JpdGVTb3VyY2VzKClcbiAgICB9XG59KTtcblxud3JpdGVVcmxzKClcbndyaXRlU291cmNlcygpXG4gICAgLnRoZW4odGVzdEJvb2ttYXJrKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==